const translations = {
    'en': {
        'title': 'Citizen Grievance & Welfare System',
        'home': 'Home',
        'dashboard': 'Dashboard',
        'admin_panel': 'Admin Panel',
        'login': 'Login',
        'signup': 'Sign Up',
        'logout': 'Logout',
        'hero_h1': 'Empowering Citizens, Improving Governance.',
        'hero_p': 'A transparent, AI-driven platform for voice-enabled grievance registration and welfare tracking.',
        'btn_file': 'File a Grievance',
        'btn_track': 'Track Complaint',
        'track_status': 'Track Status',
        'how_works': 'How it works:',
        'step1': 'Login to the portal',
        'step2': 'Speak or type your grievance',
        'step3': 'AI detects sector and priority automatically',
        'step4': 'Receive your unique Complaint ID',
        'step5': 'Monitor resolution progress in real-time',
        'description_placeholder': 'Describe your issue here...',
        'listen_steps': 'Listen to Steps',
        'track_modal_title': 'Track Your Grievance',
        'enter_complaint_id': 'Enter Complaint ID',
        'track_status': 'Track Status',
        'status_submitted': 'Submitted',
        'status_assigned': 'Assigned',
        'status_inprogress': 'In Progress',
        'status_resolved': 'Resolved',
        'citizen_login': 'Citizen Login',
        'email_address': 'Email Address',
        'password': 'Password',
        'security_captcha': 'Security Captcha:',
        'new_user': 'New user?',
        'signup_here': 'Sign Up here',
        'create_account': 'Create Your Account',
        'full_name': 'Full Name',
        'full_name_placeholder': 'Enter your full name',
        'phone_number': 'Phone Number',
        'confirm_password': 'Confirm Password',
        'already_account': 'Already have an account?',
        'login_here': 'Login here',
        'welcome': 'Welcome',
        'signup_here': 'Sign Up here',
        'security_captcha': 'Security Captcha:',
        'new_user': 'New user?',
        'recent_grievances': 'Your Recent Grievances',
        'id': 'ID',
        'sector': 'Sector',
        'status': 'Status',
        'date': 'Date',
        'action': 'Action',
        'view': 'View',
        'no_grievances': 'No grievances found.',
        'register_new': 'Register New Grievance',
        'name': 'Name',
        'mobile_number': 'Mobile Number',
        'verify': 'Verify',
        'aadhaar': 'Aadhaar Number',
        'pincode': 'Pincode',
        'full_address': 'Full Address',
        'description_label': 'Grievance Description (Speak or Type)',
        'listening': 'Listening...',
        'select_sector': 'Select Sector',
        'upload_doc': 'Upload Document (Image/PDF)',
        'cancel': 'Cancel',
        'submit_grievance': 'Submit Grievance',
        'official_panel': 'Official Control Panel',
        'sectors_heading': 'Select Sector',
        'status_submitted': 'Submitted',
        'status_assigned': 'Assigned',
        'status_inprogress': 'In Progress',
        'status_resolved': 'Resolved',
        'total_complaints': 'Total Complaints',
        'high_priority': 'High Priority',
        'pending': 'Pending',
        'resolved': 'Resolved',
        'complaint_mgmt': 'Complaint Management',
        'citizen': 'Citizen',
        'priority': 'Priority',
        'cluster_id': 'Cluster ID',
        'roads': 'Roads',
        'electricity': 'Electricity',
        'water': 'Water',
        'health': 'Health',
        'education': 'Education',
        'welfare': 'Welfare',
        'law_order': 'Law & Order',
        'chat_title': 'Welfare Assistant',
        'chat_placeholder': 'Type message...',
        'send': 'Send',
        'issues': 'Issues',
        'community_complaints': 'Community Complaints',
        'view_community': 'View Community Grievances (Grouped by Pincode)',
        'welfare_nav': 'Welfare',
        'welfare_schemes_title': 'Tamil Nadu Welfare Schemes',
        'welfare_intro': 'The Government of Tamil Nadu offers various welfare schemes to support citizens in education, healthcare, housing, and social security.'
    },
    'ta': {
        'title': 'குடிமக்கள் குறைதீர்க்கும் முறை',
        'home': 'முகப்பு',
        'dashboard': 'முகப்பு பலகை',
        'admin_panel': 'நிர்வாக குழு',
        'login': 'உள்நுழைய',
        'signup': 'பதிவு',
        'logout': 'வெளியேறு',
        'hero_h1': 'குடிமக்களுக்கு அதிகாரம், சிறந்த நிர்வாகம்.',
        'hero_p': 'எங்கள் அறிவார்ந்த AI தளத்தைப் பயன்படுத்தி உங்கள் குறைகளைப் பதிவு செய்யுங்கள்.',
        'btn_file': 'புகார் பதிவு செய்க',
        'btn_track': 'புகாரைக் கண்காணிக்கவும்',
        'how_works': 'இது எப்படி வேலை செய்கிறது:',
        'step1': 'போர்ட்டலில் உள்நுழையவும்',
        'step2': 'உங்கள் குறையைப் பேசவும் அல்லது தட்டச்சு செய்யவும்',
        'step3': 'AI தானாகவே துறை மற்றும் முன்னுரிமையைக் கண்டறியும்',
        'step4': 'உங்கள் தனிப்பட்ட புகார் ஐடியைப் பெறுங்கள்',
        'step5': 'நிகழ்நேரத்தில் தீர்வு முன்னேற்றத்தைக் கண்காணிக்கவும்',
        'listen_steps': 'படிகளைக் கேளுங்கள்',
        'track_modal_title': 'உங்கள் குறையைக் கண்காணிக்கவும்',
        'enter_complaint_id': 'புகார் ஐடியை உள்ளிடவும்',
        'track_status': 'நிலையை கண்காணிக்கவும்',
        'status_submitted': 'சமர்ப்பிக்கப்பட்டது',
        'status_assigned': 'ஒதுக்கப்பட்டது',
        'status_inprogress': 'செயல்பாட்டில் உள்ளது',
        'status_resolved': 'தீர்க்கப்பட்டது',
        'citizen_login': 'குடிமகன் உள்நுழைவு',
        'email_address': 'மின்னஞ்சல் முகவரி',
        'password': 'கடவுச்சொல்',
        'security_captcha': 'பாதுகாப்பு கேப்ட்சா:',
        'new_user': 'புதிய பயனர்?',
        'signup_here': 'இங்கே பதிவு செய்யவும்',
        'create_account': 'உங்கள் கணக்கை உருவாக்கவும்',
        'full_name': 'முழு பெயர்',
        'full_name_placeholder': 'உங்கள் முழு பெயரை உள்ளிடவும்',
        'phone_number': 'தொலைபேசி எண்',
        'confirm_password': 'கடவுச்சொல்லை உறுதிப்படுத்தவும்',
        'already_account': 'ஏற்கனவே கணக்கு உள்ளதா?',
        'login_here': 'இங்கே உள்நுழையவும்',
        'welcome': 'வரவேற்பு',
        'signup_here': 'இங்கே பதிவு செய்யவும்',
        'security_captcha': 'பாதுகாப்பு கேப்ட்சா:',
        'new_user': 'புதிய பயனர்?',
        'recent_grievances': 'உங்கள் சமீபத்திய குறைகள்',
        'id': 'அடையாளம்',
        'sector': 'துறை',
        'status': 'நிலை',
        'date': 'தேதி',
        'action': 'செயல்',
        'view': 'பார்வை',
        'no_grievances': 'குறைகள் எதுவும் இல்லை.',
        'register_new': 'புதிய குறையைப் பதிவு செய்யுங்கள்',
        'name': 'பெயர்',
        'mobile_number': 'கைபேசி எண்',
        'verify': 'சரிபார்க்கவும்',
        'aadhaar': 'ஆதார் எண்',
        'pincode': 'அஞ்சல் குறியீடு',
        'full_address': 'முழு முகவரி',
        'description_label': 'குறை விளக்கம் (பேசவும் அல்லது தட்டச்சு செய்யவும்)',
        'description_placeholder': 'உங்கள் பிரச்சினையை இங்கே விவரிக்கவும்...',
        'listening': 'கேட்கிறது...',
        'select_sector': 'துறையைத் தேர்ந்தெடுக்கவும்',
        'upload_doc': 'ஆவணத்தைப் பதிவேற்றவும் (படம்/PDF)',
        'cancel': 'ரத்துசெய்',
        'submit_grievance': 'குறையைச் சமர்ப்பிக்கவும்',
        'official_panel': 'அதிகாரப்பூர்வ கட்டுப்பாட்டு குழு',
        'status_submitted': 'சமர்ப்பிக்கப்பட்டது',
        'status_assigned': 'ஒதுக்கப்பட்டது',
        'status_inprogress': 'செயல்பாட்டில் உள்ளது',
        'status_resolved': 'தீர்க்கப்பட்டது',
        'total_complaints': 'மொத்த புகார்கள்',
        'high_priority': 'அதிக முன்னுரிமை',
        'pending': 'நிலுவையில் உள்ளது',
        'resolved': 'தீர்க்கப்பட்டது',
        'complaint_mgmt': 'புகார் மேலாண்மை',
        'citizen': 'குடிமகன்',
        'priority': 'முன்னுரிமை',
        'cluster_id': 'கிளஸ்டர் ஐடி',
        'roads': 'சாலைகள்',
        'electricity': 'மின்சாரம்',
        'water': 'தண்ணீர்',
        'health': 'சுகாதாரம்',
        'education': 'கல்வி',
        'welfare': 'நலன்',
        'law_order': 'சட்டம் ஒழுங்கு',
        'chat_title': 'நல உதவியாளர்',
        'chat_placeholder': 'செய்தியை தட்டச்சு செய்க...',
        'send': 'அனுப்பு',
        'issues': 'பிரச்சினைகள்',
        'community_complaints': 'சமூக புகார்கள்',
        'view_community': 'சமூக புகார்களைப் பார்க்கவும் (பின்கோடு மூலம்)',
        'welfare_nav': 'நலத்திட்டங்கள்',
        'welfare_schemes_title': 'தமிழ்நாடு நலத்திட்டங்கள்',
        'welfare_intro': 'தமிழ்நாடு அரசு கல்வி, சுகாதாரம், வீட்டு வசதி மற்றும் சமூக பாதுகாப்பில் பல்வேறு நலத்திட்டங்களை வழங்குகிறது.'
    },
    'te': {
        'title': 'సిటిజన్ గ్రీవెన్స్ & వెల్ఫేర్ సిస్టమ్',
        'home': 'హోమ్',
        'dashboard': 'డ్యాష్‌ బోర్డు',
        'admin_panel': 'అడ్మిన్ ప్యానెల్',
        'login': 'లాగిన్',
        'signup': 'సైన్ అప్',
        'logout': 'లాగౌట్',
        'hero_h1': 'పౌరుల సాధికారత, పాలనలో మెరుగుదల.',
        'hero_p': 'మా మేధోవంతమైన ప్లాట్‌ఫారమ్‌ని ఉపయోగించి మీ ఫిర్యాదులను నమోదు చేయండి.',
        'btn_file': 'ఫిర్యాదు నమోదు చేయండి',
        'btn_track': 'ఫిర్యాదును ట్రాక్ చేయండి',
        'how_works': 'ఇది ఎలా పనిచేస్తుంది:',
        'step1': 'పోర్టల్‌కి లాగిన్ చేయండి',
        'step2': 'మీ ఫిర్యాదును చెప్పండి లేదా టైప్ చేయండి',
        'step3': 'AI సెక్టార్ మరియు ప్రాధాన్యతను గుర్తిస్తుంది',
        'step4': 'మీ ఫిర్యాదు ID ని పొందండి',
        'step5': 'పరిష్కార పురోగతిని ట్రాక్ చేయండి',
        'listen_steps': 'దశలను వినండి',
        'track_modal_title': 'మీ ఫిర్యాదును ట్రాక్ చేయండి',
        'enter_complaint_id': 'ఫిర్యాదు ID ని నమోదు చేయండి',
        'track_status': 'ట్రాక్ స్థితి',
        'status_submitted': 'సమర్పించబడింది',
        'status_assigned': 'కేటాయించబడింది',
        'status_inprogress': 'పురోగతిలో ఉంది',
        'status_resolved': 'పరిష్కరించబడింది',
        'citizen_login': 'సిటిజన్ లాగిన్',
        'email_address': 'ఇమెయిల్ చిరునామా',
        'password': 'పాస్వర్డ్',
        'security_captcha': 'భద్రతా కోడ్:',
        'new_user': 'కొత్త వినియోగదారు?',
        'signup_here': 'ఇక్కడ సైన్ అప్ చేయండి',
        'create_account': 'మీ ఖాతాను సృష్టించండి',
        'full_name': 'పూర్తి పేరు',
        'full_name_placeholder': 'మీ పూర్తి పేరును నమోదు చేయండి',
        'phone_number': 'ఫోన్ నంబర్',
        'confirm_password': 'పాస్వర్డ్ నిర్ధారించండి',
        'already_account': 'ఇప్పటికే ఖాతా ఉందా?',
        'login_here': 'వృత్తి ఇక్కడ లాగిన్ అవ్వండి',
        'welcome': 'స్వాగతం',
        'signup_here': 'ఇక్కడ సైన్ అప్ చేయండి',
        'security_captcha': 'భద్రతా కోడ్:',
        'new_user': 'కొత్త వినియోగదారు?',
        'recent_grievances': 'మీ ఇటీవలి ఫిర్యాదులు',
        'id': 'ID',
        'sector': 'సెక్టార్',
        'status': 'స్థితి',
        'date': 'తేదీ',
        'action': 'చర్య',
        'view': 'చూడండి',
        'no_grievances': 'ఫిర్యాదులు ఏమీ లేవు.',
        'register_new': 'కొత్త ఫిర్యాదును నమోదు చేయండి',
        'name': 'పేరు',
        'mobile_number': 'మొబైల్ సంఖ్య',
        'verify': 'ధృవీకరించండి',
        'aadhaar': 'ఆధార్ సంఖ్య',
        'pincode': 'పిన్‌కోడ్',
        'full_address': 'పూర్తి చిరునామా',
        'description_label': 'ఫిర్యాదు వివరణ (మాట్లాడండి లేదా టైప్ చేయండి)',
        'description_placeholder': 'మీ సమస్యను ఇక్కడ వివరించండి...',
        'listening': 'వింటున్నాను...',
        'select_sector': 'సెక్టార్‌ను ఎంచుకోండి',
        'upload_doc': 'పత్రాన్ని అప్‌లోడ్ చేయండి',
        'cancel': 'రద్దు చేయండి',
        'submit_grievance': 'ఫిర్యాదును సమర్పించండి',
        'official_panel': 'అధికారిక డాష్‌బోర్డ్',
        'status_submitted': 'సమర్పించబడింది',
        'status_assigned': 'కేటాయించబడింది',
        'status_inprogress': 'పురోగతిలో ఉంది',
        'status_resolved': 'పరిష్కరించబడింది',
        'total_complaints': 'మొత్తం ఫిర్యాదులు',
        'high_priority': 'అధిక ప్రాధాన్యత',
        'pending': 'పెండింగ్‌లో ఉంది',
        'resolved': 'పరిష్కరించబడింది',
        'complaint_mgmt': 'ఫిర్యాదు నిర్వహణ',
        'citizen': 'పౌరుడు',
        'priority': 'ప్రాధాన్యత',
        'cluster_id': 'క్లస్టర్ ID',
        'roads': 'రోడ్లు',
        'electricity': 'విద్యుత్',
        'water': 'నీరు',
        'health': 'ఆరోగ్యం',
        'education': 'చదువు',
        'welfare': 'సంక్షేమం',
        'law_order': 'శాంతి భద్రతలు',
        'chat_title': 'సంక్షేమ సహాయకుడు',
        'chat_placeholder': 'సందేశాన్ని టైప్ చేయండి...',
        'send': 'పంపు',
        'issues': 'సమస్యలు',
        'community_complaints': 'సంఘం ఫిర్యాదులు',
        'view_community': 'సంఘం ఫిర్యాదులను చూడండి (పిన్‌కోడ్ ద్వారా)',
        'welfare_nav': 'సంక్షేమం',
        'welfare_schemes_title': 'తమిళనాడు సంక్షేమ పథకాలు',
        'welfare_intro': 'తమిళనాడు ప్రభుత్వం విద్య, ఆరోగ్యం, గృహాలు మరియు సామాజిక భద్రతలో వివిధ సంక్షేమ పథకాలను అందిస్తుంది.'
    },
    'ml': {
        'title': 'സിറ്റിസൺ ഗ്രീവൻസ് & വെൽഫെയർ സിസ്റ്റം',
        'home': 'ഹോം',
        'dashboard': 'ഡാഷ്ബോർഡ്',
        'admin_panel': 'അഡ്മിൻ പാനൽ',
        'login': 'ലോഗിൻ',
        'signup': 'സൈൻ അപ്പ്',
        'logout': 'ലോഗൗട്ട്',
        'hero_h1': 'പൗരന്മാരെ ശാക്തീകരിക്കുക, ഭരണം മെച്ചപ്പെടുത്തുക.',
        'hero_p': 'ഞങ്ങളുടെ സ്മാർട്ട് പ്ലാറ്റ്‌ഫോം ഉപയോഗിച്ച് നിങ്ങളുടെ പരാതികൾ രജിസ്റ്റർ ചെയ്യുക.',
        'btn_file': 'പരാതി നൽകുക',
        'btn_track': 'പരാതി ട്രാക്ക് ചെയ്യുക',
        'how_works': 'ഇത് എങ്ങനെ പ്രവർത്തിക്കുന്നു:',
        'step1': 'പോർട്ടലിൽ ലോഗിൻ ചെയ്യുക',
        'step2': 'നിങ്ങളുടെ പരാതി പറയുക അല്ലെങ്കിൽ ടൈപ്പ് ചെയ്യുക',
        'step3': 'AI മേഖലയും മുൻഗണനയും കണ്ടെത്തുന്നു',
        'step4': 'നിങ്ങളുടെ പരാതി ഐഡി നേടുക',
        'step5': 'പരിഹാര പുരോഗതി തത്സമയം നിരീക്ഷിക്കുക',
        'listen_steps': 'ഘട്ടങ്ങൾ കേൾക്കുക',
        'track_modal_title': 'നിങ്ങളുടെ പരാതി ട്രാക്ക് ചെയ്യുക',
        'enter_complaint_id': 'പരാതി ഐഡി നൽകുക',
        'track_status': 'ട്രാക്ക് സ്റ്റാറ്റസ്',
        'status_submitted': 'സമർപ്പിച്ചു',
        'status_assigned': 'നിയോഗിച്ചു',
        'status_inprogress': 'പുരോഗതിയിലാണ്',
        'status_resolved': 'പരിഹരിച്ചു',
        'citizen_login': 'സിറ്റിസൺ ലോഗിൻ',
        'email_address': 'ഇമെയിൽ വിലാസം',
        'password': 'പാസ്‌വേഡ്',
        'security_captcha': 'സുരക്ഷാ കോഡ്:',
        'new_user': 'പുതിയ ഉപയോക്താവ്?',
        'signup_here': 'ഇവിടെ സൈൻ അപ്പ് ചെയ്യുക',
        'create_account': 'നിങ്ങളുടെ അക്കൗണ്ട് സൃഷ്ടിക്കുക',
        'full_name': 'പൂർണ്ണ നാമം',
        'full_name_placeholder': 'നിങ്ങളുടെ മുഴുവൻ പേര് നൽകുക',
        'phone_number': 'ഫോൺ നമ്പർ',
        'confirm_password': 'പാസ്‌വേഡ് സ്ഥിരീകരിക്കുക',
        'already_account': 'ഇതിനകം അക്കൗണ്ട് ഉണ്ടോ?',
        'login_here': 'ഇവിടെ ലോഗിൻ ചെയ്യുക',
        'welcome': 'സ്വാഗതം',
        'signup_here': 'ഇവിടെ സൈൻ അപ്പ് ചെയ്യുക',
        'security_captcha': 'സുരക്ഷാ കോഡ്:',
        'new_user': 'പുതിയ ഉപയോക്താവ്?',
        'recent_grievances': 'നിങ്ങളുടെ സമീപകാല പരാതികൾ',
        'id': 'ID',
        'sector': 'മേഖല',
        'status': 'അവസ്ഥ',
        'date': 'തീയതി',
        'action': 'നടപടി',
        'view': 'കാണുക',
        'no_grievances': 'പരാതികളൊന്നും കണ്ടെത്തിയില്ല.',
        'register_new': 'പുതിയ പരാതി രജിസ്റ്റർ ചെയ്യുക',
        'name': 'പേര്',
        'mobile_number': 'മൊബൈൽ നമ്പർ',
        'verify': 'പരിശോധിക്കുക',
        'aadhaar': 'ആധാർ നമ്പർ',
        'pincode': 'പിൻകോഡ്',
        'full_address': 'പൂർണ്ണ വിലാസം',
        'description_label': 'പരാതി വിവരണം (സംസാരിക്കുക/ടൈപ്പ് ചെയ്യുക)',
        'description_placeholder': 'നിങ്ങളുടെ പ്രശ്നം ഇവിടെ വിവരിക്കുക...',
        'listening': 'ശ്രദ്ധിക്കുന്നു...',
        'select_sector': 'മേഖല തിരഞ്ഞെടുക്കുക',
        'upload_doc': 'രേഖ അപ്‌ലോഡ് ചെയ്യുക',
        'cancel': 'റദ്ദാക്കുക',
        'submit_grievance': 'പരാതി സമർപ്പിക്കുക',
        'official_panel': 'ഔദ്യോഗിക ഡാഷ്ബോർഡ്',
        'status_submitted': 'സമർപ്പിച്ചു',
        'status_assigned': 'നിയോഗിച്ചു',
        'status_inprogress': 'പുരോഗതിയിലാണ്',
        'status_resolved': 'പരിഹരിച്ചു',
        'total_complaints': 'ആകെ പരാതികൾ',
        'high_priority': 'ഉയർന്ന മുൻഗണന',
        'pending': 'തീർപ്പാക്കാത്തത്',
        'resolved': 'പരിഹരിച്ചു',
        'complaint_mgmt': 'പരാതി മാനേജ്മെന്റ്',
        'citizen': 'പൗരൻ',
        'priority': 'മുൻഗണന',
        'cluster_id': 'ക്ലസ്റ്റർ ഐഡി',
        'roads': 'റോഡുകൾ',
        'electricity': 'വൈദ്യുതി',
        'water': 'വെള്ളം',
        'health': 'ആരോഗ്യം',
        'education': 'വിദ്യാഭ്യാസം',
        'welfare': 'ക്ഷേമം',
        'law_order': 'നിയമവും സമാധാനവും',
        'chat_title': 'ക്ഷേമ സഹായി',
        'chat_placeholder': 'സന്ദേശം ടൈപ്പ് ചെയ്യുക...',
        'send': 'അയക്കുക',
        'issues': 'പ്രശ്നങ്ങൾ',
        'community_complaints': 'കമ്മ്യൂണിറ്റി പരാതികൾ',
        'view_community': 'കമ്മ്യൂണിറ്റി പരാതികൾ കാണുക (പിൻകോഡ് അനുസരിച്ച്)',
        'welfare_nav': 'ക്ഷേമം',
        'welfare_schemes_title': 'തമിഴ്‌നാട് ക്ഷേമ പദ്ധതികൾ',
        'welfare_intro': 'തമിഴ്‌നാട് സർക്കാർ വിദ്യാഭ്യാസം, ആരോഗ്യം, ഭവനം, സാമൂഹിക സുരക്ഷ എന്നിവയിൽ വിവിധ ക്ഷേമ പദ്ധതികൾ നൽകുന്നു.'
    },
    'hi': {
        'title': 'नागरिक शिकायत और कल्याण प्रणाली',
        'home': 'होम',
        'dashboard': 'डैशबोर्ड',
        'admin_panel': 'व्यवस्थापक पैनल',
        'login': 'लॉगिन',
        'signup': 'साइन अप',
        'logout': 'लॉगआउट',
        'hero_h1': 'नागरिकों का सशक्तिकरण, शासन में सुधार।',
        'hero_p': 'शिकायतें दर्ज करें और कल्याणकारी योजनाओं का लाभ उठाएं।',
        'btn_file': 'शिकायत दर्ज करें',
        'btn_track': 'शिकायत ट्रैक करें',
        'how_works': 'यह कैसे काम करता है:',
        'step1': 'पोर्टल पर लॉगिन करें',
        'step2': 'अपनी शिकायत बोलें या टाइप करें',
        'step3': 'AI स्वचालित रूप से क्षेत्र और प्राथमिकता का पता लगाता है',
        'step4': 'अपनी शिकायत आईडी प्राप्त करें',
        'step5': 'वास्तविक समय में प्रगति की निगरानी करें',
        'listen_steps': 'चरणों को सुनें',
        'track_modal_title': 'अपनी शिकायत ट्रैक करें',
        'enter_complaint_id': 'शिकायत आईडी दर्ज करें',
        'track_status': 'स्थिति ट्रैक करें',
        'status_submitted': 'जमा किया गया',
        'status_assigned': 'सौंपा गया',
        'status_inprogress': 'प्रगति पर है',
        'status_resolved': 'हल हो गया',
        'citizen_login': 'नागरिक लॉगिन',
        'email_address': 'ईमेल पता',
        'password': 'पासवर्ड',
        'security_captcha': 'सुरक्षा कोड:',
        'new_user': 'नया उपयोगकर्ता?',
        'signup_here': 'यहाँ साइन अप करें',
        'create_account': 'अपना खाता बनाएं',
        'full_name': 'पूरा नाम',
        'full_name_placeholder': 'अपना पूरा नाम दर्ज करें',
        'phone_number': 'फ़ोन नंबर',
        'confirm_password': 'पासवर्ड की पुष्टि करें',
        'already_account': 'क्या आपके पास पहले से एक खाता है?',
        'login_here': 'यहाँ लॉगिन करें',
        'welcome': 'स्वागत',
        'signup_here': 'यहाँ साइन अप करें',
        'security_captcha': 'सुरक्षा कोड:',
        'new_user': 'नया उपयोगकर्ता?',
        'recent_grievances': 'आपकी हाल की शिकायतें',
        'id': 'आईडी',
        'sector': 'क्षेत्र',
        'status': 'स्थिति',
        'date': 'दिनांक',
        'action': 'कार्रवाई',
        'view': 'देखें',
        'no_grievances': 'कोई शिकायत नहीं मिली।',
        'register_new': 'नई शिकायत दर्ज करें',
        'name': 'नाम',
        'mobile_number': 'मोबाइल नंबर',
        'verify': 'सत्यापित करें',
        'aadhaar': 'आधार संख्या',
        'pincode': 'पिन कोड',
        'full_address': 'पूरा पता',
        'description_label': 'शिकायत विवरण (बोलें या टाइप करें)',
        'description_placeholder': 'अपनी समस्या यहाँ बताएं...',
        'listening': 'सुन रहा हूँ...',
        'select_sector': 'क्षेत्र चुनें',
        'upload_doc': 'दस्तावेज़ अपलोड करें',
        'cancel': 'रद्द करें',
        'submit_grievance': 'शिकायत जमा करें',
        'official_panel': 'आधिकारिक नियंत्रण कक्ष',
        'status_submitted': 'जमा किया गया',
        'status_assigned': 'सौंपा गया',
        'status_inprogress': 'प्रगति पर है',
        'status_resolved': 'हल हो गया',
        'total_complaints': 'कुल शिकायतें',
        'high_priority': 'उच्च प्राथमिकता',
        'pending': 'लंबित',
        'resolved': 'हल हो गया',
        'complaint_mgmt': 'शिकायत प्रबंधन',
        'citizen': 'नागरिक',
        'priority': 'प्राथमिकता',
        'cluster_id': 'क्लस्टर आईडी',
        'roads': 'सड़कें',
        'electricity': 'बिजली',
        'water': 'पानी',
        'health': 'स्वास्थ्य',
        'education': 'शिक्षा',
        'welfare': 'कल्याण',
        'law_order': 'कानून और व्यवस्था',
        'chat_title': 'कल्याण सहायक',
        'chat_placeholder': 'संदेश टाइप करें...',
        'send': 'भेजें',
        'issues': 'मुद्दे',
        'community_complaints': 'सामुदायिक शिकायतें',
        'view_community': 'सामुदायिक शिकायतें देखें (पिनकोड द्वारा)',
        'welfare_nav': 'कल्याण',
        'welfare_schemes_title': 'तमिलनाडु कल्याण योजनाएं',
        'welfare_intro': 'तमिलनाडु सरकार शिक्षा, स्वास्थ्य, आवास और सामाजिक सुरक्षा में विभिन्न कल्याण योजनाएं प्रदान करती है।'
    }
};

let currentLang = 'en';

function changeLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('lang', lang);
    document.documentElement.lang = lang;

    // Update all translatable elements
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
            if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                el.placeholder = translations[lang][key];
            } else {
                el.innerText = translations[lang][key];
            }
        }
    });

    // Update elements with data-placeholder attribute
    document.querySelectorAll('[data-placeholder]').forEach(el => {
        const key = el.getAttribute('data-placeholder');
        if (translations[lang] && translations[lang][key]) {
            el.placeholder = translations[lang][key];
        }
    });

    // Reorder language selector to show selected language at top
    reorderLanguageSelector(lang);

    // Speak welcome message (optional)
    const titles = {
        'en': 'Switched to English',
        'ta': 'தமிழ் மொழிக்கு மாற்றப்பட்டது',
        'te': 'తెలుగుకు మార్చబడింది',
        'ml': 'മലയാളത്തിലേക്ക് മാറി',
        'hi': 'हिंदी में बदला गया'
    };
    // speak(titles[lang]); // Optional: Announce change
}

function reorderLanguageSelector(selectedLang) {
    const selector = document.querySelector('.lang-selector select');
    if (!selector) return;

    // Language options with their display names
    const languages = [
        { value: 'en', text: 'English' },
        { value: 'ta', text: 'தமிழ் (Tamil)' },
        { value: 'hi', text: 'हिन्दी (Hindi)' },
        { value: 'te', text: 'తెలుగు (Telugu)' },
        { value: 'ml', text: 'മലയാളം (Malayalam)' }
    ];

    // Find the selected language and move it to the front
    const selectedIndex = languages.findIndex(l => l.value === selectedLang);
    if (selectedIndex > -1) {
        const selectedItem = languages.splice(selectedIndex, 1)[0];
        languages.unshift(selectedItem); // Add to the beginning
    }

    // Clear and rebuild the selector
    selector.innerHTML = '';
    languages.forEach(lang => {
        const option = document.createElement('option');
        option.value = lang.value;
        option.textContent = lang.text;
        selector.appendChild(option);
    });

    // Set the selected value
    selector.value = selectedLang;
}

// Initialize Language on Load
document.addEventListener('DOMContentLoaded', () => {
    const savedLang = localStorage.getItem('lang') || 'en';
    const selector = document.querySelector('.lang-selector select');
    if (selector) {
        reorderLanguageSelector(savedLang);
        selector.value = savedLang;
        changeLanguage(savedLang);
    }
});

// Voice to Text
function startSpeechRecognition(targetId) {
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (!SpeechRecognition) {
        alert("Your browser does not support Speech Recognition. Please use Google Chrome or Edge.");
        return;
    }

    const recognition = new SpeechRecognition();
    recognition.lang = currentLang === 'en' ? 'en-US' : currentLang + '-IN';
    recognition.interimResults = false;
    recognition.maxAlternatives = 1;

    const target = document.getElementById(targetId);
    let originalPlaceholder = target.placeholder;
    target.placeholder = translations[currentLang]['listening'] || "Listening...";
    target.classList.add('listening-mode'); // Optional CSS class for visual feedback

    recognition.start();

    recognition.onstart = () => {
        console.log(`Voice recognition started for language: ${recognition.lang}`);
    };

    recognition.onresult = (event) => {
        const transcript = event.results[0][0].transcript;
        console.log(`Recognized: ${transcript}`);
        target.value = transcript;
        if (targetId === 'description') {
            analyzeText(transcript);
        }
    };

    recognition.onend = () => {
        target.placeholder = originalPlaceholder;
        target.classList.remove('listening-mode');
        console.log("Voice recognition ended.");
    };

    recognition.onerror = (event) => {
        console.error("Speech recognition error", event.error);
        target.placeholder = `Error: ${event.error}`;
        if (event.error === 'no-speech') {
            alert("No speech was detected. Please try again.");
        } else if (event.error === 'audio-capture') {
            alert("No microphone was found. Ensure that a microphone is installed and that microphone settings are configured correctly.");
        } else if (event.error === 'not-allowed') {
            alert("Permission to use microphone is blocked. Please allow microphone access.");
        } else if (event.error === 'network') {
            alert("Network error. Speech recognition requires an internet connection.");
        } else if (event.error === 'language-not-supported') {
            alert(`Voice input for ${currentLang} is not supported in this browser.`);
        }
        target.classList.remove('listening-mode');
    };
}

// AI Analysis
async function analyzeText(text) {
    if (text.length < 5) return;
    const res = await fetch('/api/analyze', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ description: text })
    });
    const data = await res.json();

    // Highlight sector
    document.querySelectorAll('.sector-item').forEach(item => {
        item.classList.remove('active');
        if (item.dataset.sector === data.sector) {
            item.classList.add('active');
        }
    });

    // Show priority badge
    const priorityEl = document.getElementById('detected-priority');
    if (priorityEl) {
        priorityEl.innerText = `${translations[currentLang]['priority']}: ${data.priority}`;
        priorityEl.className = `priority-badge ${data.priority.toLowerCase()}`;
    }
}

// Text to Speech
function speak(text) {
    if (!text) return;
    window.speechSynthesis.cancel();

    // Ensure voices are loaded (for some browsers)
    let voices = window.speechSynthesis.getVoices();
    if (voices.length === 0) {
        window.speechSynthesis.onvoiceschanged = () => speak(text);
        return;
    }

    const utter = new SpeechSynthesisUtterance(text);

    // Map codes if necessary, but browsers use different names
    // Try to match lang code first, then name
    const targetCode = currentLang === 'en' ? 'en-US' : currentLang + '-IN';

    // Strategy: 
    // 1. Exact Lang match (e.g. ta-IN)
    // 2. Lang prefix match (e.g. ta)
    // 3. Name match (e.g. "Google Tamil")
    // 4. Fallback to English/Hindi if specific regional voice missing (optional)

    let voice = voices.find(v => v.lang === targetCode);

    if (!voice) {
        voice = voices.find(v => v.lang.startsWith(currentLang));
    }

    if (!voice) {
        // Fallback to name search
        const langNames = {
            'ta': 'Tamil',
            'te': 'Telugu',
            'ml': 'Malayalam',
            'hi': 'Hindi',
            'en': 'English'
        };
        const name = langNames[currentLang];
        if (name) {
            voice = voices.find(v => v.name.includes(name));
        }
    }

    if (voice) {
        utter.voice = voice;
        utter.lang = voice.lang;
        console.log("Speaking with voice:", voice.name);
    } else {
        console.warn("No voice found for", targetCode);
        // Fallback to generic lang setting even if voice obj not found
        utter.lang = targetCode;

        // If it's a critical language failure, maybe alert?
        // alert(`Voice for ${currentLang} not found on this device.`);
    }

    utter.onerror = (e) => {
        console.error('Speech synthesis error:', e);
    };

    window.speechSynthesis.speak(utter);
}

// Chatbot
async function sendMessage() {
    const input = document.getElementById('chat-input');
    const msg = input.value;
    if (!msg) return;

    appendMessage('User', msg);
    input.value = '';

    const res = await fetch('/api/chatbot', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ message: msg, lang: currentLang })
    });
    const data = await res.json();
    appendMessage(translations[currentLang]['chat_title'] || 'Assistant', data.reply);
    speak(data.reply);
}

function appendMessage(sender, text) {
    const chatBox = document.getElementById('chat-messages');
    const div = document.createElement('div');
    div.className = `message ${sender === 'User' ? 'user' : 'assistant'}`;
    div.innerHTML = `<strong>${sender}:</strong> ${text}`;
    chatBox.appendChild(div);
    chatBox.scrollTop = chatBox.scrollHeight;
}

// Modal Toggle
function toggleModal(id) {
    const modal = document.getElementById(id);
    modal.style.display = modal.style.display === 'block' ? 'none' : 'block';
}

// Close modal when clicking outside
window.onclick = function (event) {
    if (event.target.classList.contains('modal')) {
        event.target.style.display = "none";
    }
}

// Read Single Step Aloud
function readSingleStep(key) {
    const t = translations[currentLang];
    const text = t[key];
    if (text) {
        speak(text);
    }
}
